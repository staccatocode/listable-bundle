{% block staccato_listable_pagination %}
{% spaceless %}
{% if pagination.pages > 1 %}
<nav class="staccato-pagination">
    <ul class="{{ class }}">
    {% if pagination.page > 0 %}
        {{ block('staccato_listable_pagination_prev') }}
    {% endif %}

    {% if pagination.page > sides %}
        {% set page = 0 %}
        {{ block('staccato_listable_pagination_page') }}
        {% if pagination.page > sides + 1 %}
            {{ block('staccato_listable_pagination_hidden') }}
        {% endif %}
    {% endif %}

    {% for page in pages %}
        {{ block('staccato_listable_pagination_page') }}
    {% endfor %}

    {% if pagination.page + 1 < pagination.pages - sides %}
        {% if pagination.pages - (pagination.page + 1) > sides + 1 %}
            {{ block('staccato_listable_pagination_hidden') }}
        {% endif %}
        {% set page = pagination.pages - 1 %}
        {{ block('staccato_listable_pagination_page') }}
    {% endif %}

    {% if pagination.page + 1 < pagination.pages %}
        {{ block('staccato_listable_pagination_next') }}
    {% endif %}
    </ul>
</nav>
{% endif %}
{% endspaceless %}
{% endblock %}

{% block staccato_listable_pagination_prev %}
<li class="page-item">
    <a class="page-link" href="{{ listable_url({(list.vars.params.page): pagination.page - 1}, []) }}">&lt;</a>
</li>
{% endblock %}

{% block staccato_listable_pagination_next %}
<li class="page-item">
    <a class="page-link" href="{{ listable_url({(list.vars.params.page): pagination.page + 1}, []) }}">&gt;</a>
</li>
{% endblock %}

{% block staccato_listable_pagination_hidden %}
<li class="page-item disabled">
    <a class="page-link" href="#">...</a>
</li>
{% endblock %}

{% block staccato_listable_pagination_page %}
<li class="page-item {{ pagination.page == page ? 'active' : '' }}">
    <a class="page-link" href="{{ listable_url({(list.vars.params.page): page}, []) }}">{{ page + 1 }}</a>
</li>
{% endblock %}